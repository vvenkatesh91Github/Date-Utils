var DateUtils=function(year,month,day,hours,minutes,seconds,milliSeconds,meridiem){function manageAlert(t){console.error("Date Formatting Error {"+t+"}")}function returnDate(t){return void 0==t?refDate.toString():void 0!=t?t:this.date.toString()}function dateTokens(t,e){var r=t.replace(/[^a-zA-Z0-9]/g,",").split(","),i=e.replace(/[^a-zA-Z0-9]/g,",").split(","),a=(new DateUtils).getFormats(),n={},o={},s=t;for(var h in r)s=s.replace(r[h],i[h]);for(var m in a){var u=a[m];for(h in u)i.indexOf(u[h])>=0&&(o[u[h]]=r[i.indexOf(u[h])],n[m]=u[h])}return{inDateObj:o,inFormatObj:n,formatedDate:s}}function replaceTokens(t,e){for(var r in e)("mm"==r||"dd"==r)&&parseInt(e[r])<10&&(e[r]="0"+parseInt(e[r])),t=t.replace(r,e[r]);return t}function getNextMonth(t,e,r){if("mm"==e){if(0==t&&void 0!=r)return 1;if(1==t)return 2;if(2==t)return 3;if(3==t)return 4;if(4==t)return 5;if(5==t)return 6;if(6==t)return 7;if(7==t)return 8;if(8==t)return 9;if(9==t)return 10;if(10==t)return 11;if(11==t&&void 0!=r)return 0;if(11==t)return 12;if(12==t)return 1;throw"Incorrect Month."}if("MMM"==e){if("Jan"==t)return"Feb";if("Feb"==t)return"Mar";if("Mar"==t)return"Apr";if("Apr"==t)return"May";if("May"==t)return"Jun";if("Jun"==t)return"Jul";if("Jul"==t)return"Aug";if("Aug"==t)return"Sep";if("Sep"==t)return"Oct";if("Oct"==t)return"Nov";if("Nov"==t)return"Dec";if("Dec"==t)return"Jan";throw"Incorrect Month."}if("MMMM"==e){if("January"==t)return"February";if("February"==t)return"March";if("March"==t)return"April";if("April"==t)return"May";if("May"==t)return"June";if("June"==t)return"July";if("July"==t)return"August";if("August"==t)return"September";if("September"==t)return"October";if("October"==t)return"November";if("November"==t)return"December";if("December"==t)return"January";throw"Incorrect Month."}throw"Incorrect Format."}function getPreviousMonth(t,e,r){if("mm"==e){if(0==t&&void 0!=r)return 11;if(1==t&&void 0!=r)return 0;if(1==t)return 12;if(2==t)return 1;if(3==t)return 2;if(4==t)return 3;if(5==t)return 4;if(6==t)return 5;if(7==t)return 6;if(8==t)return 7;if(9==t)return 8;if(10==t)return 9;if(11==t)return 10;if(12==t)return 11;throw"Incorrect Month."}if("MMM"==e){if("Jan"==t)return"Dec";if("Feb"==t)return"Jan";if("Mar"==t)return"Feb";if("Apr"==t)return"Mar";if("May"==t)return"Apr";if("Jun"==t)return"May";if("Jul"==t)return"Jun";if("Aug"==t)return"Jul";if("Sep"==t)return"Aug";if("Oct"==t)return"Sep";if("Nov"==t)return"Oct";if("Dec"==t)return"Nov";throw"Incorrect Month."}if("MMMM"==e){if("January"==t)return"December";if("February"==t)return"January";if("March"==t)return"February";if("April"==t)return"March";if("May"==t)return"April";if("June"==t)return"May";if("July"==t)return"June";if("August"==t)return"July";if("September"==t)return"August";if("October"==t)return"September";if("November"==t)return"October";if("December"==t)return"November";throw"Incorrect Month."}throw"Incorrect Format."}function dayStrToNbr(t){return"Sun"==t||"Sunday"==t?0:"Mon"==t||"Monday"==t?1:"Tue"==t||"Tuesday"==t?2:"Wed"==t||"Wednesday"==t?3:"Thu"==t||"Thursday"==t?4:"Fri"==t||"Friday"==t?5:"Sat"==t||"Saturday"==t?6:1}function dayNbrtoStr(t,e){if("DDD"==e)return 0==t?"Sun":1==t?"Mon":2==t?"Tue":3==t?"Wed":4==t?"Thu":5==t?"Fri":6==t?"Sat":"Sun";if("DDDD"==e)return 0==t?"Sunday":1==t?"Monday":2==t?"Tuesday":3==t?"Wednesday":4==t?"Thursday":5==t?"Friday":6==t?"Saturday":"Sunday";throw"Incorrect Format."}function dayStrToStr(t,e){if("DDD"==e)return"Sunday"==t?"Sun":"Monday"==t?"Mon":"Tuesday"==t?"Tue":"Wednesday"==t?"Wed":"Thursday"==t?"Thu":"Friday"==t?"Fri":"Saturday"==t?"Sat":"Sun";if("DDDD"==e)return"Sun"==t?"Sunday":"Mon"==t?"Monday":"Tue"==t?"Tuesday":"Wed"==t?"Wednesday":"Thu"==t?"Thursday":"Fri"==t?"Friday":"Sat"==t?"Saturday":"Sunday";throw"Incorrect Format."}function monthStrToNbr(t){return"Jan"==t||"January"==t?0:"Feb"==t||"February"==t?1:"Mar"==t||"March"==t?2:"Apr"==t||"April"==t?3:"May"==t||"May"==t?4:"Jun"==t||"June"==t?5:"Jul"==t||"July"==t?6:"Aug"==t||"August"==t?7:"Sep"==t||"September"==t?8:"Oct"==t||"October"==t?9:"Nov"==t||"November"==t?10:"Dec"==t||"December"==t?11:0}function monthNbrToStr(t,e){if("MMM"==e)return 0==t?"Jan":1==t?"Feb":2==t?"Mar":3==t?"Apr":4==t?"May":5==t?"Jun":6==t?"Jul":7==t?"Aug":8==t?"Sep":9==t?"Oct":10==t?"Nov":11==t?"Dec":"Jan";if("MMMM"==e)return 0==t?"January":1==t?"February":2==t?"March":3==t?"April":4==t?"May":5==t?"June":6==t?"July":7==t?"August":8==t?"September":9==t?"October":10==t?"November":11==t?"December":"January";throw"Incorrect Format."}function monthStrToStr(t,e){if("MMM"==e)return"January"==t?"Jan":"February"==t?"Feb":"March"==t?"Mar":"April"==t?"Apr":"May"==t?"May":"June"==t?"Jun":"July"==t?"Jul":"August"==t?"Aug":"September"==t?"Sep":"October"==t?"Oct":"November"==t?"Nov":"December"==t?"Dec":"Jan";if("MMMM"==e)return"Jan"==t?"January":"Feb"==t?"February":"Mar"==t?"March":"Apr"==t?"April":"May"==t?"May":"Jun"==t?"June":"Jul"==t?"July":"Aug"==t?"August":"Sep"==t?"September":"Oct"==t?"October":"Nov"==t?"November":"Dec"==t?"December":"January";throw"Incorrect Format."}function findDateItems(t,e,r,i,a){try{var n="";return"day"==t?n=findDay(e,r,i):"month"==t?n=findMonth(e,r,i):"year"==t?n=findYear(e,r,i):"hours"==t?n=findHours(e,r,i):"minutes"==t?n=e:"seconds"==t?n=e:"milliSeconds"==t?n=e:"meridiem"==t&&(n=e,n=void 0==n&&a>12?"PM":"AM"),n}catch(o){manageAlert(o)}}function findDay(t,e,r){try{if(e==r)return t;if("dd"==e){if("ddsc"==r)return"1"==t[1]?t+("11"==t?"th":"st"):"2"==t[1]?t+("12"==t?"th":"nd"):"3"==t[1]?t+("13"==t?"th":"rd"):t+"th";if("DDD"==r||"DDDD"==r)return dayNbrtoStr(t,r)}else if("ddsc"==e){if("dd"==r)return t.substr(0,2);if("DDD"==r||"DDDD"==r)return dayNbrtoStr(t.substr(0,2),r)}else if("DDD"==e||"DDDD"==e){if("dd"==r||"ddsc"==r)throw"Cannot Convert "+t+" To "+r+" Format";return dayStrToStr(t,r)}}catch(i){manageAlert(i)}}function findMonth(t,e,r){try{if(e==r)return t;if("mm"==e&&("MMM"==r||"MMMM"==r))return monthNbrToStr(t,r);if("MMM"==e||"MMMM"==e)return"mm"==r?parseInt(monthStrToNbr(t))+1:monthStrToStr(t,r)}catch(i){manageAlert(i)}}function findYear(t,e,r){try{if(e==r)return t;if("yy"==e&&"YYYY"==r)return refDate.getFullYear().toString().substr(0,2)+t;if("YYYY"==e&&"yy"==r)return t.substr(2,3)}catch(i){manageAlert(i)}}function findHours(t,e,r){try{if(e==r)return t;if(e.charCodeAt(0)+e.charCodeAt(1)==208&&r.charCodeAt(0)+r.charCodeAt(1)==144)return 12>t?parseInt(t)+12+"":t;if(e.charCodeAt(0)+e.charCodeAt(1)==144&&r.charCodeAt(0)+r.charCodeAt(1)==208)return t>12?parseInt(t)-12+"":t}catch(i){manageAlert(i)}}function compareYear(t,e,r,i){return t=findYear(t,e,"YYYY"),r=findYear(r,i,"YYYY"),parseInt(r)==parseInt(t)?"equal":parseInt(r)>parseInt(t)?"greater":parseInt(r)<parseInt(t)?"lesser":void 0}function compareMonth(t,e,r,i,a){return a&&"mm"==e&&(t=parseInt(t)+1),t=findMonth(t,e,"mm"),r=findMonth(r,i,"mm"),parseInt(r)==parseInt(t)?"equal":parseInt(r)>parseInt(t)?"greater":parseInt(r)<parseInt(t)?"lesser":void 0}function compareDays(t,e,r,i){return t=findMonth(t,e,"dd"),r=findMonth(r,i,"dd"),parseInt(r)==parseInt(t)?"equal":parseInt(r)>parseInt(t)?"greater":parseInt(r)<parseInt(t)?"lesser":void 0}function compareHours(t,e,r,i,a,n){return void 0==r&&(parseInt(t)<12?r="AM":parseInt(t)>=12&&(r="PM")),void 0==n&&(parseInt(i)<12?n="AM":parseInt(i)>=12&&(n="PM")),void 0!=r&&""!=r&&(parseInt(t)<12&&("PM"==r||"pm"==r)&&(t=parseInt(t)+12),12!=parseInt(t)||"AM"!=r&&"am"!=r||(t=0)),void 0!=n&&""!=n&&(parseInt(i)<12&&("PM"==n||"pm"==n)&&(i=parseInt(i)+12),12!=parseInt(i)||"AM"!=n&&"am"!=n||(i=0)),parseInt(i)==parseInt(t)?"equal":parseInt(i)>parseInt(t)?"greater":parseInt(i)<parseInt(t)?"lesser":void 0}function compareMinutes(t,e){return parseInt(e)==parseInt(t)?"equal":parseInt(e)>parseInt(t)?"greater":parseInt(e)<parseInt(t)?"lesser":void 0}function compareSeconds(t,e){return parseInt(e)==parseInt(t)?"equal":parseInt(e)>parseInt(t)?"greater":parseInt(e)<parseInt(t)?"lesser":void 0}function compareMilli(t,e){return parseInt(e)==parseInt(t)?"equal":parseInt(e)>parseInt(t)?"greater":parseInt(e)<parseInt(t)?"lesser":void 0}this.date=new Date;var refDate=new Date;if(this.year=void 0==year||null==year||""==year?this.date.getFullYear().toString():year,2==this.year.length?this.year=this.date.getFullYear().toString().substr(0,2)+this.year:this.year=parseInt(this.year),isNaN(month)?this.month=monthStrToNbr(month):this.month=void 0==month||null==month||""==month?0:parseInt(month),isNaN(day)?this.day=dayStrToNbr(day):this.day=void 0==day||null==day||""==day?0:parseInt(day),this.hours=void 0==hours||null==hours||""==hours?0:parseInt(hours),this.minutes=void 0==minutes||null==minutes||""==minutes?0:parseInt(minutes),this.seconds=void 0==seconds||null==seconds||""==seconds?0:parseInt(seconds),this.milliSeconds=void 0==milliSeconds||null==milliSeconds||""==milliSeconds?0:parseInt(milliSeconds),this.meridiem=void 0==meridiem||null==meridiem||""==meridiem?"AM":meridiem,"AM"==this.meridiem&&this.hours>12)throw"Invalid Meridiem";"PM"==this.meridiem&&this.hours<12&&(this.hours+=12),this.month="''"==this.day?this.month+1:this.month,refDate=new Date(this.year,this.month,this.day,this.hours,this.minutes,this.seconds,this.milliSeconds),this.getFormats=function(){var t={year:["yy","YYYY"],month:["mm","MMM","MMMM"],day:["dd","ddsc","DDD","DDDD"],hours:["hh","HH"],minutes:["ii"],seconds:["ss"],milliSeconds:["mi"],meridiem:["ap"]};return t},this.getDate=function(){return this.day+"/"+(0==this.month?1:this.month)+"/"+this.year},this.formatDate=function(outformat,date,informat){try{var tempDate=outformat;if(void 0!=date&&null!=date&&""!=date||void 0==informat||null==informat||""==informat){if(void 0!=date&&null!=date&&""!=date&&(void 0==informat||null==informat||""==informat))throw"Required Input Date Format.";void 0!=date&&null!=date&&""!=date||void 0!=informat&&null!=informat&&""!=informat||(date=this.date.getDate()+"/"+(this.date.getMonth()+1)+"/"+this.date.getFullYear()+" "+this.date.getHours()+":"+this.date.getMinutes()+":"+this.date.getSeconds(),informat="dd/mm/YYYY hh:ii:ss")}else date=this.date.getDate()+"/"+(this.date.getMonth()+1)+"/"+this.date.getFullYear()+" "+this.date.getHours()+":"+this.date.getMinutes()+":"+this.date.getSeconds();var outformatSpec=outformat.match(/[^a-zA-Z0-9]/g),outformatVals=outformat.replace(/[^a-zA-Z0-9]/g,",").split(","),dateVals=date.replace(/[^a-zA-Z0-9]/g,",").split(","),informatVals=informat.replace(/[^a-zA-Z0-9]/g,",").split(","),dateFormats=this.getFormats(),inFormatObj={},inDateObj={},outFormatObj={};for(var key in dateFormats){var arr=dateFormats[key];for(i in arr)outformatVals.indexOf(arr[i])>=0&&(outFormatObj[key]=arr[i]),informatVals.indexOf(arr[i])>=0&&(inDateObj[arr[i]]=dateVals[informatVals.indexOf(arr[i])],inFormatObj[key]=arr[i],eval("this."+key+" = '"+dateVals[informatVals.indexOf(arr[i])]+"'"))}if(this.year=void 0==this.year||null==this.year?"''":this.year,2==this.year.length&&"''"!=this.year?this.year=this.date.getFullYear().toString().substr(0,2)+this.year:"''"==this.year?this.year=this.date.getFullYear().toString():this.year=parseInt(this.year),isNaN(this.month)?this.month=monthStrToNbr(this.month):this.month=void 0==this.month||null==this.month?"''":parseInt(this.month),isNaN(this.day)?this.day=dayStrToNbr(this.day):this.day=void 0==this.day||null==this.day?"''":parseInt(this.day),this.hours=void 0==this.hours||null==this.hours?"''":parseInt(this.hours),this.minutes=void 0==this.minutes||null==this.minutes?"''":parseInt(this.minutes),this.seconds=void 0==this.seconds||null==this.seconds?"''":parseInt(this.seconds),this.milliSeconds=void 0==this.milliSeconds||null==this.milliSeconds?"''":parseInt(this.milliSeconds),this.hours>12?this.meridiem="PM":this.hours<=12&&"PM"!=this.meridiem?this.meridiem="AM":this.meridiem="","''"!=this.meridiem&&"''"==this.hours)throw"Invalid Hours";if("''"!=this.meridiem&&"''"!=this.hours){if("AM"==this.meridiem&&this.hours>12)throw"Invalid Meridiem";"PM"==this.meridiem&&this.hours<12&&(this.hours+=12)}this.month="''"==this.day?this.month+1:this.month,refDate=new Date(this.year,this.month,this.day,this.hours,this.minutes,this.seconds,this.milliSeconds),this.month+=1;for(key in outFormatObj)tempDate=tempDate.replace(outFormatObj[key],findDateItems(key,inDateObj[inFormatObj[key]],inFormatObj[key],outFormatObj[key],this.hours));return returnDate(tempDate)}catch(exception){manageAlert(exception)}},this.daysOfMonth=function(t,e,r){if(void 0!=r&&(t+=1),1==t||"Jan"==t||"January"==t)return 31;if(2==t||"Feb"==t||"February"==t)return e%4==0?29:28;if(3==t||"Mar"==t||"March"==t)return 31;if(4==t||"Apr"==t||"April"==t)return 30;if(5==t||"May"==t||"May"==t)return 31;if(6==t||"Jun"==t||"June"==t)return 30;if(7==t||"Jul"==t||"July"==t)return 31;if(8==t||"Aug"==t||"August"==t)return 31;if(9==t||"Sep"==t||"September"==t)return 30;if(10==t||"Oct"==t||"October"==t)return 31;if(11==t||"Nov"==t||"November"==t)return 30;if(12==t||"Dec"==t||"December"==t)return 31;throw"Incorrect Month."},this.isLeapYear=function(t){try{if(""==t||void 0==t||null==t)t=parseInt(this.year);else{if(isNaN(t))throw"Invalid year.";t=parseInt(t)}return t%4==0?!0:!1}catch(e){manageAlert(e)}},this.addHour=function(t,e,r){var i=e;try{if(isNaN(t))throw"Invalid Number of Hours.";var a,n,o,s,h,m,u,d;if(""!=e&&void 0!=e&&null!=e){var b=dateTokens(e,r);if(!(b.inFormatObj.day in b.inDateObj&&b.inFormatObj.month in b.inDateObj))throw"Day and Month should be present.";h=b.inFormatObj.day,a=b.inDateObj[h],m=b.inFormatObj.month,n=b.inDateObj[m],s=b.inFormatObj.hours in b.inDateObj?b.inDateObj[b.inFormatObj.hours]:0,u=b.inFormatObj.meridiem in b.inDateObj?b.inDateObj[b.inFormatObj.meridiem]:12>s?"AM":"PM","PM"==u&&parseInt(s)<12&&(s=parseInt(s)+12)}else b=dateTokens(this.getDate(),"dd/mm/YYYY"),s=void 0==b.inDateObj[b.inFormatObj.hours]?0:b.inDateObj[b.inFormatObj.hours],a=void 0==b.inDateObj[b.inFormatObj.day]?this.day:b.inDateObj[b.inFormatObj.day],n=void 0==b.inDateObj[b.inFormatObj.month]?this.month:b.inDateObj[b.inFormatObj.month],o=void 0==b.inDateObj[b.inFormatObj.year]?this.year:b.inDateObj[b.inFormatObj.year],u=void 0==b.inDateObj[b.inFormatObj.meridiem]?this.meridiem:b.inDateObj[b.inFormatObj.meridiem],d=!0;var f=24-s;if(f>=t)b.inDateObj[b.inFormatObj.day]=a,b.inDateObj[b.inFormatObj.month]=n,parseInt(s)+parseInt(t)>=24?(b.inDateObj[b.inFormatObj.hours]=0,b.inDateObj[b.inFormatObj.meridiem]="AM",e=replaceTokens(b.formatedDate,b.inDateObj),e=this.addDay(1,e,r),s=0):(s=parseInt(s)+parseInt(t),b.inDateObj[b.inFormatObj.hours]=s,e=replaceTokens(b.formatedDate,b.inDateObj));else for(b.inDateObj[b.inFormatObj.hours]=0,b.inDateObj[b.inFormatObj.meridiem]="AM",e=replaceTokens(b.formatedDate,b.inDateObj),e=this.addDay(1,e,r),t-=f;!(0>=t);)t>=24?(t-=24,e=this.addDay(1,e,r)):(s=t,b=dateTokens(e,r),b.inDateObj[b.inFormatObj.hours]=t,b.inDateObj[b.inFormatObj.meridiem]=parseInt(t)>=12?"PM":"AM",e=replaceTokens(b.formatedDate,b.inDateObj),t-=t);return void 0!=i&&""!=e&&void 0!=e&&null!=e?e:(this.day=a,this.month=n,this.year=o,this.hours=s,this.meridiem=u,refDate=this.date=new Date(this.year,this.month,this.day,this.hours,this.minutes,this.seconds,this.milliSeconds),this.getDate())}catch(l){manageAlert(l)}},this.subHour=function(t,e,r){var i=e;try{if(isNaN(t))throw"Invalid Number of Hours.";var a,n,o,s,h,m,u,d;if(""!=e&&void 0!=e&&null!=e){var b=dateTokens(e,r);if(!(b.inFormatObj.day in b.inDateObj&&b.inFormatObj.month in b.inDateObj))throw"Day and Month should be present.";h=b.inFormatObj.day,a=b.inDateObj[h],m=b.inFormatObj.month,n=b.inDateObj[m],s=b.inFormatObj.hours in b.inDateObj?b.inDateObj[b.inFormatObj.hours]:0,u=b.inFormatObj.meridiem in b.inDateObj?b.inDateObj[b.inFormatObj.meridiem]:12>s?"AM":"PM","PM"==u&&parseInt(s)<12&&(s=parseInt(s)+12)}else b=dateTokens(this.getDate(),"dd/mm/YYYY"),s=void 0==b.inDateObj[b.inFormatObj.hours]?0:b.inDateObj[b.inFormatObj.hours],a=void 0==b.inDateObj[b.inFormatObj.day]?this.day:b.inDateObj[b.inFormatObj.day],n=void 0==b.inDateObj[b.inFormatObj.month]?this.month:b.inDateObj[b.inFormatObj.month],o=void 0==b.inDateObj[b.inFormatObj.year]?this.year:b.inDateObj[b.inFormatObj.year],u=void 0==b.inDateObj[b.inFormatObj.meridiem]?this.meridiem:b.inDateObj[b.inFormatObj.meridiem],d=!0;if(s>=t)t=s-t,b.inDateObj[b.inFormatObj.day]=a,b.inDateObj[b.inFormatObj.month]=n,0>t?(b.inDateObj[b.inFormatObj.meridiem]="PM",b.inDateObj[b.inFormatObj.hours]=23,s=23):(b.inDateObj[b.inFormatObj.meridiem]="AM",b.inDateObj[b.inFormatObj.hours]=t,s=t),e=replaceTokens(b.formatedDate,b.inDateObj);else{if(24==t)return this.subDay(1,e,r);if(t>24)for(;!(0>=t);)t>=24?(e=this.subDay(1,e,r),t-=24):(t=0,b=dateTokens(e,r),b.inDateObj[b.inFormatObj.meridiem]=12>23-t?"AM":"PM",b.inDateObj[b.inFormatObj.hours]=23-t,e=replaceTokens(b.formatedDate,b.inDateObj));else 24>t&&(b.inDateObj[b.inFormatObj.meridiem]=12>24-t?"AM":"PM",b.inDateObj[b.inFormatObj.hours]=24-t,e=replaceTokens(b.formatedDate,b.inDateObj),e=parseInt(s)-t<0?this.subDay(1,e,r):replaceTokens(b.formatedDate,b.inDateObj),s=24-t)}return void 0!=i&&""!=e&&void 0!=e&&null!=e?e:(this.day=a,this.month=n,this.year=o,this.hours=s,this.meridiem=u,refDate=this.date=new Date(this.year,this.month,this.day,this.hours,this.minutes,this.seconds,this.milliSeconds),this.getDate())}catch(f){manageAlert(f)}},this.addDay=function(t,e,r){try{if(null==t||void 0==t||0==t)throw"Invalid Days to Add";var i,a,n,o,s,h;if(""!=e&&void 0!=e&&null!=e){var m=dateTokens(e,r);if(i=m.inFormatObj.day,"dd"!=i)throw"Invalid day. Cannot Calculate day";a=m.inFormatObj.month,n=parseInt(m.inDateObj[i]),o=m.inDateObj[a],s=m.inDateObj[m.inFormatObj.year],void 0!=s&&(s=parseInt(s))}else a="mm",n=this.day,o=this.month,s=this.year,h=!0;var u=this.daysOfMonth(o,s,h),d=u-n;if(d>=t)n+=t;else for(n+=d,t-=d;0!=t;)(11==o&&void 0!=h||12==o||"Dec"==o||"December"==o)&&(s+=1),o=getNextMonth(o,a,h),u=this.daysOfMonth(o,s,h),u>=t?(n=t,t=0):t-=u;return""!=e&&void 0!=e&&null!=e?(m.inDateObj[m.inFormatObj.day]=n,m.inDateObj[m.inFormatObj.month]=o,m.inDateObj[m.inFormatObj.year]=s,e=replaceTokens(m.formatedDate,m.inDateObj)):(this.day=n,this.month=o,this.year=s,refDate=this.date=new Date(this.year,this.month,this.day,this.hours,this.minutes,this.seconds,this.milliSeconds),this.getDate())}catch(b){manageAlert(b)}},this.subDay=function(t,e,r){try{if(null==t||void 0==t||0==t)throw"Invalid Days to Add";var i,a,n,o,s,h;if(""!=e&&void 0!=e&&null!=e){var m=dateTokens(e,r);if(i=m.inFormatObj.day,"dd"!=i)throw"Invalid day. Cannot Calculate day with ";a=m.inFormatObj.month,n=parseInt(m.inDateObj[i]),o=m.inDateObj[a],s=m.inDateObj[m.inFormatObj.year],void 0!=s&&(s=parseInt(s))}else a="mm",n=this.day,o=this.month,s=this.year,h=!0;if(n>t)n-=t;else{t-=n,o=getPreviousMonth(o,a,h),(11==o&&void 0!=h||12==o||"Dec"==o||"December"==o)&&(s-=1);var u=this.daysOfMonth(o,s,h);for(0==t&&(n=u);0!=t;)u>=t?(n=u-t,t=0):(t-=u,o=getPreviousMonth(o,a,h),(11==o&&void 0!=h||12==o||"Dec"==o||"December"==o)&&(s-=1),u=this.daysOfMonth(o,s,h))}return""!=e&&void 0!=e&&null!=e?(m.inDateObj[m.inFormatObj.day]=n,m.inDateObj[m.inFormatObj.month]=o,m.inDateObj[m.inFormatObj.year]=s,e=replaceTokens(m.formatedDate,m.inDateObj)):(this.day=n,this.month=o,this.year=s,refDate=this.date=new Date(this.year,this.month,this.day,this.hours,this.minutes,this.seconds,this.milliSeconds),this.getDate())}catch(d){manageAlert(d)}},this.addMonth=function(t,e,r){try{if(isNaN(t))throw"Invalid Number of Months.";if(t=parseInt(t),""!=e&&void 0!=e&&null!=e){var i,a=dateTokens(e,r);void 0!=a.inDateObj[a.inFormatObj.year]&&(i=parseInt(a.inDateObj[a.inFormatObj.year]));for(var n=a.inFormatObj.month,o=a.inDateObj[n],s=0;t>s;s++)o=getNextMonth(o,n),1!=o&&"Jan"!=o&&"January"!=o||void 0==i||(i+=1);return"mm"==n&&10>o&&(o="0"+o),void 0!=i&&(a.inDateObj[a.inFormatObj.year]=i),a.inDateObj[a.inFormatObj.month]=o,e=replaceTokens(a.formatedDate,a.inDateObj)}for(var s=0;t>s;s++)this.month=getNextMonth(this.month,"mm"),(1==this.month||"Jan"==this.month||"January"==this.month)&&(this.year+=1);return refDate=this.date=new Date(this.year,this.month,this.day,this.hours,this.minutes,this.seconds,this.milliSeconds),this.getDate()}catch(h){manageAlert(h)}},this.subMonth=function(t,e,r){try{if(isNaN(t))throw"Invalid Number of Months.";if(t=parseInt(t),""!=e&&void 0!=e&&null!=e){var i,a=dateTokens(e,r);void 0!=a.inDateObj[a.inFormatObj.year]&&(i=parseInt(a.inDateObj[a.inFormatObj.year]));for(var n=a.inFormatObj.month,o=a.inDateObj[n],s=0;t>s;s++)o=getPreviousMonth(o,n),12!=o&&"Dec"!=o&&"December"!=o||void 0==i||(i-=1);return"mm"==n&&10>o&&(o="0"+o),void 0!=i&&(a.inDateObj[a.inFormatObj.year]=i),a.inDateObj[a.inFormatObj.month]=o,e=replaceTokens(a.formatedDate,a.inDateObj)}for(var s=0;t>s;s++)this.month=getPreviousMonth(this.month,"mm"),(1==this.month||"Dec"==this.month||"December"==this.month)&&(this.year-=1);return refDate=this.date=new Date(this.year,this.month,this.day,this.hours,this.minutes,this.seconds,this.milliSeconds),this.getDate()}catch(h){manageAlert(h)}},this.addYear=function(t,e,r){try{if(isNaN(t))throw"Invalid Number of Years.";if(t=parseInt(t),""!=e&&void 0!=e&&null!=e){var i=dateTokens(e,r);return i.inDateObj[i.inFormatObj.year]=parseInt(i.inDateObj[i.inFormatObj.year])+t,e=replaceTokens(i.formatedDate,i.inDateObj)}return this.year+=t,refDate=this.date=new Date(this.year,this.month,this.day,this.hours,this.minutes,this.seconds,this.milliSeconds),this.getDate()}catch(a){manageAlert(a)}},this.subYear=function(t,e,r){try{if(isNaN(t))throw"Invalid Number of Years.";if(t=parseInt(t),""!=e&&void 0!=e&&null!=e){var i=dateTokens(e,r);return i.inDateObj[i.inFormatObj.year]=parseInt(i.inDateObj[i.inFormatObj.year])-t,e=replaceTokens(i.formatedDate,i.inDateObj)}return this.year-=t,refDate=this.date=new Date(this.year,this.month,this.day,this.hours,this.minutes,this.seconds,this.milliSeconds),this.getDate()}catch(a){manageAlert(a)}},this.compareDate=function(t,e,r,i){var a;try{for(var n=Object.keys(this.getFormats()),o=dateTokens(t,e),s=dateTokens(r,i),h=0;h<n.length;h++){var m=n[h]in o.inFormatObj;if(m=n[h]in s.inFormatObj,!m)throw"Compare Error. Format Mismatch...";var u;if("year"==n[h]?u=compareYear(o.inDateObj[o.inFormatObj.year],o.inFormatObj.year,s.inDateObj[s.inFormatObj.year],s.inFormatObj.year):"month"==n[h]?u=compareMonth(o.inDateObj[o.inFormatObj.month],o.inFormatObj.month,s.inDateObj[s.inFormatObj.month],s.inFormatObj.month):"day"==n[h]?u=compareDays(o.inDateObj[o.inFormatObj.day],o.inFormatObj.day,s.inDateObj[s.inFormatObj.day],s.inFormatObj.day):"hours"==n[h]?u=compareHours(o.inDateObj[o.inFormatObj.hours],o.inFormatObj.hours,o.inFormatObj.meridiem,s.inDateObj[s.inFormatObj.hours],s.inFormatObj.hours,s.inFormatObj.meridiem):"minutes"==n[h]?u=compareMinutes(o.inDateObj[o.inFormatObj.minutes],s.inDateObj[s.inFormatObj.minutes]):"seconds"==n[h]?u=compareSeconds(o.inDateObj[o.inFormatObj.seconds],s.inDateObj[s.inFormatObj.seconds]):"milliSeconds"==n[h]&&(u=compareMilli(o.inDateObj[o.inFormatObj.milliSeconds],s.inDateObj[s.inFormatObj.milliSeconds])),void 0==u)throw"Unable to compare dates.";if("equal"!=u){a=u;break}}if(void 0==a)throw"Unable to compare dates."}catch(d){manageAlert(d)}return a}};