var DateUtils=function(year,month,day,hours,minutes,seconds,milliSeconds,meridiem){function manageAlert(a){console.error("Date Formatting Error {"+a+"}")}function returnDate(a){return void 0==a?refDate.toString():void 0!=a?a:this.date.toString()}function dateTokens(a,b){var c=a.replace(/[^a-zA-Z0-9]/g,",").split(","),d=b.replace(/[^a-zA-Z0-9]/g,",").split(","),e=(new DateUtils).getFormats(),f={},g={},i=a;for(var j in c)i=i.replace(c[j],d[j]);for(var k in e){var l=e[k];for(j in l)d.indexOf(l[j])>=0&&(g[l[j]]=c[d.indexOf(l[j])],f[k]=l[j])}return{inDateObj:g,inFormatObj:f,formatedDate:i}}function replaceTokens(a,b){for(var c in b)"mm"!=c&&"dd"!=c||parseInt(b[c])<10&&(b[c]="0"+parseInt(b[c])),a=a.replace(c,b[c]);return a}function getNextMonth(a,b,c){if("mm"==b){if(0==a&&void 0!=c)return 1;if(1==a)return 2;if(2==a)return 3;if(3==a)return 4;if(4==a)return 5;if(5==a)return 6;if(6==a)return 7;if(7==a)return 8;if(8==a)return 9;if(9==a)return 10;if(10==a)return 11;if(11==a&&void 0!=c)return 0;if(11==a)return 12;if(12==a)return 1;throw"Incorrect Month."}if("MMM"==b){if("Jan"==a)return"Feb";if("Feb"==a)return"Mar";if("Mar"==a)return"Apr";if("Apr"==a)return"May";if("May"==a)return"Jun";if("Jun"==a)return"Jul";if("Jul"==a)return"Aug";if("Aug"==a)return"Sep";if("Sep"==a)return"Oct";if("Oct"==a)return"Nov";if("Nov"==a)return"Dec";if("Dec"==a)return"Jan";throw"Incorrect Month."}if("MMMM"==b){if("January"==a)return"February";if("February"==a)return"March";if("March"==a)return"April";if("April"==a)return"May";if("May"==a)return"June";if("June"==a)return"July";if("July"==a)return"August";if("August"==a)return"September";if("September"==a)return"October";if("October"==a)return"November";if("November"==a)return"December";if("December"==a)return"January";throw"Incorrect Month."}throw"Incorrect Format."}function getPreviousMonth(a,b,c){if("mm"==b){if(0==a&&void 0!=c)return 11;if(1==a&&void 0!=c)return 0;if(1==a)return 12;if(2==a)return 1;if(3==a)return 2;if(4==a)return 3;if(5==a)return 4;if(6==a)return 5;if(7==a)return 6;if(8==a)return 7;if(9==a)return 8;if(10==a)return 9;if(11==a)return 10;if(12==a)return 11;throw"Incorrect Month."}if("MMM"==b){if("Jan"==a)return"Dec";if("Feb"==a)return"Jan";if("Mar"==a)return"Feb";if("Apr"==a)return"Mar";if("May"==a)return"Apr";if("Jun"==a)return"May";if("Jul"==a)return"Jun";if("Aug"==a)return"Jul";if("Sep"==a)return"Aug";if("Oct"==a)return"Sep";if("Nov"==a)return"Oct";if("Dec"==a)return"Nov";throw"Incorrect Month."}if("MMMM"==b){if("January"==a)return"December";if("February"==a)return"January";if("March"==a)return"February";if("April"==a)return"March";if("May"==a)return"April";if("June"==a)return"May";if("July"==a)return"June";if("August"==a)return"July";if("September"==a)return"August";if("October"==a)return"September";if("November"==a)return"October";if("December"==a)return"November";throw"Incorrect Month."}throw"Incorrect Format."}function dayStrToNbr(a){return"Sun"==a||"Sunday"==a?0:"Mon"==a||"Monday"==a?1:"Tue"==a||"Tuesday"==a?2:"Wed"==a||"Wednesday"==a?3:"Thu"==a||"Thursday"==a?4:"Fri"==a||"Friday"==a?5:"Sat"==a||"Saturday"==a?6:1}function dayNbrtoStr(a,b){if("DDD"==b)return 0==a?"Sun":1==a?"Mon":2==a?"Tue":3==a?"Wed":4==a?"Thu":5==a?"Fri":6==a?"Sat":"Sun";if("DDDD"==b)return 0==a?"Sunday":1==a?"Monday":2==a?"Tuesday":3==a?"Wednesday":4==a?"Thursday":5==a?"Friday":6==a?"Saturday":"Sunday";throw"Incorrect Format."}function dayStrToStr(a,b){if("DDD"==b)return"Sunday"==a?"Sun":"Monday"==a?"Mon":"Tuesday"==a?"Tue":"Wednesday"==a?"Wed":"Thursday"==a?"Thu":"Friday"==a?"Fri":"Saturday"==a?"Sat":"Sun";if("DDDD"==b)return"Sun"==a?"Sunday":"Mon"==a?"Monday":"Tue"==a?"Tuesday":"Wed"==a?"Wednesday":"Thu"==a?"Thursday":"Fri"==a?"Friday":"Sat"==a?"Saturday":"Sunday";throw"Incorrect Format."}function monthStrToNbr(a){return"Jan"==a||"January"==a?0:"Feb"==a||"February"==a?1:"Mar"==a||"March"==a?2:"Apr"==a||"April"==a?3:"May"==a||"May"==a?4:"Jun"==a||"June"==a?5:"Jul"==a||"July"==a?6:"Aug"==a||"August"==a?7:"Sep"==a||"September"==a?8:"Oct"==a||"October"==a?9:"Nov"==a||"November"==a?10:"Dec"==a||"December"==a?11:0}function monthNbrToStr(a,b){if("MMM"==b)return 0==a?"Jan":1==a?"Feb":2==a?"Mar":3==a?"Apr":4==a?"May":5==a?"Jun":6==a?"Jul":7==a?"Aug":8==a?"Sep":9==a?"Oct":10==a?"Nov":11==a?"Dec":"Jan";if("MMMM"==b)return 0==a?"January":1==a?"February":2==a?"March":3==a?"April":4==a?"May":5==a?"June":6==a?"July":7==a?"August":8==a?"September":9==a?"October":10==a?"November":11==a?"December":"January";throw"Incorrect Format."}function monthStrToStr(a,b){if("MMM"==b)return"January"==a?"Jan":"February"==a?"Feb":"March"==a?"Mar":"April"==a?"Apr":"May"==a?"May":"June"==a?"Jun":"July"==a?"Jul":"August"==a?"Aug":"September"==a?"Sep":"October"==a?"Oct":"November"==a?"Nov":"December"==a?"Dec":"Jan";if("MMMM"==b)return"Jan"==a?"January":"Feb"==a?"February":"Mar"==a?"March":"Apr"==a?"April":"May"==a?"May":"Jun"==a?"June":"Jul"==a?"July":"Aug"==a?"August":"Sep"==a?"September":"Oct"==a?"October":"Nov"==a?"November":"Dec"==a?"December":"January";throw"Incorrect Format."}function findDateItems(a,b,c,d){try{var e="";return"day"==a?e=findDay(b,c,d):"month"==a?e=findMonth(b,c,d):"year"==a?e=findYear(b,c,d):"hours"==a?e=findHours(b,c,d):"minutes"==a?e=b:"seconds"==a?e=b:"milliSeconds"==a?e=b:"meridiem"==a&&(e=b),e}catch(a){manageAlert(a)}}function findDay(a,b,c){try{if(b==c)return a;if("dd"==b){if("ddsc"==c)return"1"==a[1]?a+("11"==a?"th":"st"):"2"==a[1]?a+("12"==a?"th":"nd"):"3"==a[1]?a+("13"==a?"th":"rd"):a+"th";if("DDD"==c||"DDDD"==c)return dayNbrtoStr(a,c)}else if("ddsc"==b){if("dd"==c)return a.substr(0,2);if("DDD"==c||"DDDD"==c)return dayNbrtoStr(a.substr(0,2),c)}else if("DDD"==b||"DDDD"==b){if("dd"==c||"ddsc"==c)throw"Cannot Convert "+a+" To "+c+" Format";return dayStrToStr(a,c)}}catch(a){manageAlert(a)}}function findMonth(a,b,c){try{if(b==c)return a;if("mm"==b&&("MMM"==c||"MMMM"==c))return monthNbrToStr(a,c);if("MMM"==b||"MMMM"==b)return"mm"==c?parseInt(monthStrToNbr(a))+1:monthStrToStr(a,c)}catch(a){manageAlert(a)}}function findYear(a,b,c){try{if(b==c)return a;if("yy"==b&&"YYYY"==c)return refDate.getFullYear().toString().substr(0,2)+a;if("YYYY"==b&&"yy"==c)return a.substr(2,3)}catch(a){manageAlert(a)}}function findHours(a,b,c){try{if(b==c)return a;if(b.charCodeAt(0)+b.charCodeAt(1)==208&&c.charCodeAt(0)+c.charCodeAt(1)==144)return a<12?parseInt(a)+12+"":a;if(b.charCodeAt(0)+b.charCodeAt(1)==144&&c.charCodeAt(0)+c.charCodeAt(1)==208)return a>12?parseInt(a)-12+"":a}catch(a){manageAlert(a)}}function compareYear(a,b,c,d){return a=findYear(a,b,"YYYY"),c=findYear(c,d,"YYYY"),parseInt(c)==parseInt(a)?"equal":parseInt(c)>parseInt(a)?"greater":parseInt(c)<parseInt(a)?"lesser":void 0}function compareMonth(a,b,c,d,e){return e&&"mm"==b&&(a=parseInt(a)+1),a=findMonth(a,b,"mm"),c=findMonth(c,d,"mm"),parseInt(c)==parseInt(a)?"equal":parseInt(c)>parseInt(a)?"greater":parseInt(c)<parseInt(a)?"lesser":void 0}function compareDays(a,b,c,d){return a=findMonth(a,b,"dd"),c=findMonth(c,d,"dd"),parseInt(c)==parseInt(a)?"equal":parseInt(c)>parseInt(a)?"greater":parseInt(c)<parseInt(a)?"lesser":void 0}function compareHours(a,b,c,d,e,f){return void 0==c&&(parseInt(a)<12?c="AM":parseInt(a)>=12&&(c="PM")),void 0==f&&(parseInt(d)<12?f="AM":parseInt(d)>=12&&(f="PM")),void 0!=c&&""!=c&&(parseInt(a)<12&&("PM"==c||"pm"==c)&&(a=parseInt(a)+12),12!=parseInt(a)||"AM"!=c&&"am"!=c||(a=0)),void 0!=f&&""!=f&&(parseInt(d)<12&&("PM"==f||"pm"==f)&&(d=parseInt(d)+12),12!=parseInt(d)||"AM"!=f&&"am"!=f||(d=0)),parseInt(d)==parseInt(a)?"equal":parseInt(d)>parseInt(a)?"greater":parseInt(d)<parseInt(a)?"lesser":void 0}function compareMinutes(a,b){return parseInt(b)==parseInt(a)?"equal":parseInt(b)>parseInt(a)?"greater":parseInt(b)<parseInt(a)?"lesser":void 0}function compareSeconds(a,b){return parseInt(b)==parseInt(a)?"equal":parseInt(b)>parseInt(a)?"greater":parseInt(b)<parseInt(a)?"lesser":void 0}function compareMilli(a,b){return parseInt(b)==parseInt(a)?"equal":parseInt(b)>parseInt(a)?"greater":parseInt(b)<parseInt(a)?"lesser":void 0}this.date=new Date;var refDate=new Date;if(this.year=void 0==year||null==year||""==year?this.date.getFullYear().toString():year,2==this.year.length?this.year=this.date.getFullYear().toString().substr(0,2)+this.year:this.year=parseInt(this.year),isNaN(month)?this.month=monthStrToNbr(month):this.month=void 0==month||null==month||""==month?0:parseInt(month),isNaN(day)?this.day=dayStrToNbr(day):this.day=void 0==day||null==day||""==day?0:parseInt(day),this.hours=void 0==hours||null==hours||""==hours?0:parseInt(hours),this.minutes=void 0==minutes||null==minutes||""==minutes?0:parseInt(minutes),this.seconds=void 0==seconds||null==seconds||""==seconds?0:parseInt(seconds),this.milliSeconds=void 0==milliSeconds||null==milliSeconds||""==milliSeconds?0:parseInt(milliSeconds),this.meridiem=void 0==meridiem||null==meridiem||""==meridiem?"AM":meridiem,"AM"==this.meridiem&&this.hours>12)throw"Invalid Meridiem";"PM"==this.meridiem&&this.hours<12&&(this.hours+=12),this.month="''"==this.day?this.month+1:this.month,refDate=new Date(this.year,this.month,this.day,this.hours,this.minutes,this.seconds,this.milliSeconds),this.getFormats=function(){var a={year:["yy","YYYY"],month:["mm","MMM","MMMM"],day:["dd","ddsc","DDD","DDDD"],hours:["hh","HH"],minutes:["ii"],seconds:["ss"],milliSeconds:["mi"],meridiem:["ap"]};return a},this.getDate=function(){return this.day+"/"+(0==this.month?1:this.month)+"/"+this.year},this.formatDate=function(outformat,date,informat){try{var tempDate=outformat;if(void 0!=date&&null!=date&&""!=date||void 0==informat||null==informat||""==informat){if(void 0!=date&&null!=date&&""!=date&&(void 0==informat||null==informat||""==informat))throw"Required Input Date Format.";void 0!=date&&null!=date&&""!=date||void 0!=informat&&null!=informat&&""!=informat||(date=this.date.getDate()+"/"+(this.date.getMonth()+1)+"/"+this.date.getFullYear()+" "+this.date.getHours()+":"+this.date.getMinutes()+":"+this.date.getSeconds(),informat="dd/mm/YYYY hh:ii:ss")}else date=this.date.getDate()+"/"+(this.date.getMonth()+1)+"/"+this.date.getFullYear()+" "+this.date.getHours()+":"+this.date.getMinutes()+":"+this.date.getSeconds();var outformatSpec=outformat.match(/[^a-zA-Z0-9]/g),outformatVals=outformat.replace(/[^a-zA-Z0-9]/g,",").split(","),dateVals=date.replace(/[^a-zA-Z0-9]/g,",").split(","),informatVals=informat.replace(/[^a-zA-Z0-9]/g,",").split(","),dateFormats=this.getFormats(),inFormatObj={},inDateObj={},outFormatObj={};for(var key in dateFormats){var arr=dateFormats[key];for(i in arr)outformatVals.indexOf(arr[i])>=0&&(outFormatObj[key]=arr[i]),informatVals.indexOf(arr[i])>=0&&(inDateObj[arr[i]]=dateVals[informatVals.indexOf(arr[i])],inFormatObj[key]=arr[i],eval("this."+key+" = '"+dateVals[informatVals.indexOf(arr[i])]+"'"))}if(this.year=void 0==this.year||null==this.year?"''":this.year,2==this.year.length&&"''"!=this.year?this.year=this.date.getFullYear().toString().substr(0,2)+this.year:"''"==this.year?this.year=this.date.getFullYear().toString():this.year=parseInt(this.year),isNaN(this.month)?this.month=monthStrToNbr(this.month):this.month=void 0==this.month||null==this.month?"''":parseInt(this.month),isNaN(this.day)?this.day=dayStrToNbr(this.day):this.day=void 0==this.day||null==this.day?"''":parseInt(this.day),this.hours=void 0==this.hours||null==this.hours?"''":parseInt(this.hours),this.minutes=void 0==this.minutes||null==this.minutes?"''":parseInt(this.minutes),this.seconds=void 0==this.seconds||null==this.seconds?"''":parseInt(this.seconds),this.milliSeconds=void 0==this.milliSeconds||null==this.milliSeconds?"''":parseInt(this.milliSeconds),this.meridiem=void 0==this.meridiem||null==this.meridiem?"''":this.meridiem,"''"!=this.meridiem&&"''"==this.hours)throw"Invalid Hours";if("''"!=this.meridiem&&"''"!=this.hours){if("AM"==this.meridiem&&this.hours>12)throw"Invalid Meridiem";"PM"==this.meridiem&&this.hours<12&&(this.hours+=12)}this.month="''"==this.day?this.month+1:this.month,refDate=new Date(this.year,this.month,this.day,this.hours,this.minutes,this.seconds,this.milliSeconds),this.month+=1;for(key in outFormatObj)tempDate=tempDate.replace(outFormatObj[key],findDateItems(key,inDateObj[inFormatObj[key]],inFormatObj[key],outFormatObj[key]));return returnDate(tempDate)}catch(a){manageAlert(a)}},this.daysOfMonth=function(a,b,c){if(void 0!=c&&(a+=1),1==a||"Jan"==a||"January"==a)return 31;if(2==a||"Feb"==a||"February"==a)return b%4==0?29:28;if(3==a||"Mar"==a||"March"==a)return 31;if(4==a||"Apr"==a||"April"==a)return 30;if(5==a||"May"==a||"May"==a)return 31;if(6==a||"Jun"==a||"June"==a)return 30;if(7==a||"Jul"==a||"July"==a)return 31;if(8==a||"Aug"==a||"August"==a)return 31;if(9==a||"Sep"==a||"September"==a)return 30;if(10==a||"Oct"==a||"October"==a)return 31;if(11==a||"Nov"==a||"November"==a)return 30;if(12==a||"Dec"==a||"December"==a)return 31;throw"Incorrect Month."},this.isLeapYear=function(a){try{if(""==a||void 0==a||null==a)a=parseInt(this.year);else{if(isNaN(a))throw"Invalid year.";a=parseInt(a)}return a%4==0}catch(a){manageAlert(a)}},this.addHour=function(a,b,c){var d=b;try{if(isNaN(a))throw"Invalid Number of Hours.";var e,f,g,h,i,j,k,l;if(""!=b&&void 0!=b&&null!=b){var m=dateTokens(b,c);if(!(m.inFormatObj.day in m.inDateObj&&m.inFormatObj.month in m.inDateObj))throw"Day and Month should be present.";i=m.inFormatObj.day,e=m.inDateObj[i],j=m.inFormatObj.month,f=m.inDateObj[j],h=m.inFormatObj.hours in m.inDateObj?m.inDateObj[m.inFormatObj.hours]:0,k=m.inFormatObj.meridiem in m.inDateObj?m.inDateObj[m.inFormatObj.meridiem]:h<12?"AM":"PM","PM"==k&&parseInt(h)<12&&(h=parseInt(h)+12)}else m=dateTokens(this.getDate(),"dd/mm/YYYY"),h=void 0==m.inDateObj[m.inFormatObj.hours]?0:m.inDateObj[m.inFormatObj.hours],e=void 0==m.inDateObj[m.inFormatObj.day]?this.day:m.inDateObj[m.inFormatObj.day],f=void 0==m.inDateObj[m.inFormatObj.month]?this.month:m.inDateObj[m.inFormatObj.month],g=void 0==m.inDateObj[m.inFormatObj.year]?this.year:m.inDateObj[m.inFormatObj.year],k=void 0==m.inDateObj[m.inFormatObj.meridiem]?this.meridiem:m.inDateObj[m.inFormatObj.meridiem],l=!0;var n=24-h;if(a<=n)m.inDateObj[m.inFormatObj.day]=e,m.inDateObj[m.inFormatObj.month]=f,parseInt(h)+parseInt(a)>=24?(m.inDateObj[m.inFormatObj.hours]=0,m.inDateObj[m.inFormatObj.meridiem]="AM",b=replaceTokens(m.formatedDate,m.inDateObj),b=this.addDay(1,b,c),h=0):(h=parseInt(h)+parseInt(a),m.inDateObj[m.inFormatObj.hours]=h,b=replaceTokens(m.formatedDate,m.inDateObj));else for(m.inDateObj[m.inFormatObj.hours]=0,m.inDateObj[m.inFormatObj.meridiem]="AM",b=replaceTokens(m.formatedDate,m.inDateObj),b=this.addDay(1,b,c),a-=n;!(a<=0);)a>=24?(a-=24,b=this.addDay(1,b,c)):(h=a,m=dateTokens(b,c),m.inDateObj[m.inFormatObj.hours]=a,m.inDateObj[m.inFormatObj.meridiem]=parseInt(a)>=12?"PM":"AM",b=replaceTokens(m.formatedDate,m.inDateObj),a-=a);return void 0!=d&&""!=b&&void 0!=b&&null!=b?b:(this.day=e,this.month=f,this.year=g,this.hours=h,this.meridiem=k,refDate=this.date=new Date(this.year,this.month,this.day,this.hours,this.minutes,this.seconds,this.milliSeconds),this.getDate())}catch(a){manageAlert(a)}},this.subHour=function(a,b,c){var d=b;try{if(isNaN(a))throw"Invalid Number of Hours.";var e,f,g,h,i,j,k,l;if(""!=b&&void 0!=b&&null!=b){var m=dateTokens(b,c);if(!(m.inFormatObj.day in m.inDateObj&&m.inFormatObj.month in m.inDateObj))throw"Day and Month should be present.";i=m.inFormatObj.day,e=m.inDateObj[i],j=m.inFormatObj.month,f=m.inDateObj[j],h=m.inFormatObj.hours in m.inDateObj?m.inDateObj[m.inFormatObj.hours]:0,k=m.inFormatObj.meridiem in m.inDateObj?m.inDateObj[m.inFormatObj.meridiem]:h<12?"AM":"PM","PM"==k&&parseInt(h)<12&&(h=parseInt(h)+12)}else m=dateTokens(this.getDate(),"dd/mm/YYYY"),h=void 0==m.inDateObj[m.inFormatObj.hours]?0:m.inDateObj[m.inFormatObj.hours],e=void 0==m.inDateObj[m.inFormatObj.day]?this.day:m.inDateObj[m.inFormatObj.day],f=void 0==m.inDateObj[m.inFormatObj.month]?this.month:m.inDateObj[m.inFormatObj.month],g=void 0==m.inDateObj[m.inFormatObj.year]?this.year:m.inDateObj[m.inFormatObj.year],k=void 0==m.inDateObj[m.inFormatObj.meridiem]?this.meridiem:m.inDateObj[m.inFormatObj.meridiem],l=!0;if(a<=h)a=h-a,m.inDateObj[m.inFormatObj.day]=e,m.inDateObj[m.inFormatObj.month]=f,a<0?(m.inDateObj[m.inFormatObj.meridiem]="PM",m.inDateObj[m.inFormatObj.hours]=23,h=23):(m.inDateObj[m.inFormatObj.meridiem]="AM",m.inDateObj[m.inFormatObj.hours]=a,h=a),b=replaceTokens(m.formatedDate,m.inDateObj);else{if(24==a)return this.subDay(1,b,c);if(a>24)for(;!(a<=0);)a>=24?(b=this.subDay(1,b,c),a-=24):(a=0,m=dateTokens(b,c),m.inDateObj[m.inFormatObj.meridiem]=23-a<12?"AM":"PM",m.inDateObj[m.inFormatObj.hours]=23-a,b=replaceTokens(m.formatedDate,m.inDateObj));else a<24&&(m.inDateObj[m.inFormatObj.meridiem]=24-a<12?"AM":"PM",m.inDateObj[m.inFormatObj.hours]=24-a,b=replaceTokens(m.formatedDate,m.inDateObj),b=parseInt(h)-a<0?this.subDay(1,b,c):replaceTokens(m.formatedDate,m.inDateObj),h=24-a)}return void 0!=d&&""!=b&&void 0!=b&&null!=b?b:(this.day=e,this.month=f,this.year=g,this.hours=h,this.meridiem=k,refDate=this.date=new Date(this.year,this.month,this.day,this.hours,this.minutes,this.seconds,this.milliSeconds),this.getDate())}catch(a){manageAlert(a)}},this.addDay=function(a,b,c){try{if(null==a||void 0==a||0==a)throw"Invalid Days to Add";var d,e,f,g,h,i;if(""!=b&&void 0!=b&&null!=b){var j=dateTokens(b,c);if(d=j.inFormatObj.day,"dd"!=d)throw"Invalid day. Cannot Calculate day";e=j.inFormatObj.month,f=parseInt(j.inDateObj[d]),g=j.inDateObj[e],h=j.inDateObj[j.inFormatObj.year],void 0!=h&&(h=parseInt(h))}else e="mm",f=this.day,g=this.month,h=this.year,i=!0;var k=this.daysOfMonth(g,h,i),l=k-f;if(a<=l)f+=a;else for(f+=l,a-=l;0!=a;)(11==g&&void 0!=i||12==g||"Dec"==g||"December"==g)&&(h+=1),g=getNextMonth(g,e,i),k=this.daysOfMonth(g,h,i),a<=k?(f=a,a=0):a-=k;return""!=b&&void 0!=b&&null!=b?(j.inDateObj[j.inFormatObj.day]=f,j.inDateObj[j.inFormatObj.month]=g,j.inDateObj[j.inFormatObj.year]=h,b=replaceTokens(j.formatedDate,j.inDateObj)):(this.day=f,this.month=g,this.year=h,refDate=this.date=new Date(this.year,this.month,this.day,this.hours,this.minutes,this.seconds,this.milliSeconds),this.getDate())}catch(a){manageAlert(a)}},this.subDay=function(a,b,c){try{if(null==a||void 0==a||0==a)throw"Invalid Days to Add";var d,e,f,g,h,i;if(""!=b&&void 0!=b&&null!=b){var j=dateTokens(b,c);if(d=j.inFormatObj.day,"dd"!=d)throw"Invalid day. Cannot Calculate day with ";e=j.inFormatObj.month,f=parseInt(j.inDateObj[d]),g=j.inDateObj[e],h=j.inDateObj[j.inFormatObj.year],void 0!=h&&(h=parseInt(h))}else e="mm",f=this.day,g=this.month,h=this.year,i=!0;if(a<f)f-=a;else{a-=f,g=getPreviousMonth(g,e,i),(11==g&&void 0!=i||12==g||"Dec"==g||"December"==g)&&(h-=1);var k=this.daysOfMonth(g,h,i);for(0==a&&(f=k);0!=a;)a<=k?(f=k-a,a=0):(a-=k,g=getPreviousMonth(g,e,i),(11==g&&void 0!=i||12==g||"Dec"==g||"December"==g)&&(h-=1),k=this.daysOfMonth(g,h,i))}return""!=b&&void 0!=b&&null!=b?(j.inDateObj[j.inFormatObj.day]=f,j.inDateObj[j.inFormatObj.month]=g,j.inDateObj[j.inFormatObj.year]=h,b=replaceTokens(j.formatedDate,j.inDateObj)):(this.day=f,this.month=g,this.year=h,refDate=this.date=new Date(this.year,this.month,this.day,this.hours,this.minutes,this.seconds,this.milliSeconds),this.getDate())}catch(a){manageAlert(a)}},this.addMonth=function(a,b,c){try{if(isNaN(a))throw"Invalid Number of Months.";if(a=parseInt(a),""!=b&&void 0!=b&&null!=b){var e,d=dateTokens(b,c);void 0!=d.inDateObj[d.inFormatObj.year]&&(e=parseInt(d.inDateObj[d.inFormatObj.year]));for(var f=d.inFormatObj.month,g=d.inDateObj[f],h=0;h<a;h++)g=getNextMonth(g,f),1!=g&&"Jan"!=g&&"January"!=g||void 0==e||(e+=1);return"mm"==f&&g<10&&(g="0"+g),void 0!=e&&(d.inDateObj[d.inFormatObj.year]=e),d.inDateObj[d.inFormatObj.month]=g,b=replaceTokens(d.formatedDate,d.inDateObj)}for(var h=0;h<a;h++)this.month=getNextMonth(this.month,"mm"),1!=this.month&&"Jan"!=this.month&&"January"!=this.month||(this.year+=1);return refDate=this.date=new Date(this.year,this.month,this.day,this.hours,this.minutes,this.seconds,this.milliSeconds),this.getDate()}catch(a){manageAlert(a)}},this.subMonth=function(a,b,c){try{if(isNaN(a))throw"Invalid Number of Months.";if(a=parseInt(a),""!=b&&void 0!=b&&null!=b){var e,d=dateTokens(b,c);void 0!=d.inDateObj[d.inFormatObj.year]&&(e=parseInt(d.inDateObj[d.inFormatObj.year]));for(var f=d.inFormatObj.month,g=d.inDateObj[f],h=0;h<a;h++)g=getPreviousMonth(g,f),12!=g&&"Dec"!=g&&"December"!=g||void 0==e||(e-=1);return"mm"==f&&g<10&&(g="0"+g),void 0!=e&&(d.inDateObj[d.inFormatObj.year]=e),d.inDateObj[d.inFormatObj.month]=g,b=replaceTokens(d.formatedDate,d.inDateObj)}for(var h=0;h<a;h++)this.month=getPreviousMonth(this.month,"mm"),1!=this.month&&"Dec"!=this.month&&"December"!=this.month||(this.year-=1);return refDate=this.date=new Date(this.year,this.month,this.day,this.hours,this.minutes,this.seconds,this.milliSeconds),this.getDate()}catch(a){manageAlert(a)}},this.addYear=function(a,b,c){try{if(isNaN(a))throw"Invalid Number of Years.";if(a=parseInt(a),""!=b&&void 0!=b&&null!=b){var d=dateTokens(b,c);return d.inDateObj[d.inFormatObj.year]=parseInt(d.inDateObj[d.inFormatObj.year])+a,b=replaceTokens(d.formatedDate,d.inDateObj)}return this.year+=a,refDate=this.date=new Date(this.year,this.month,this.day,this.hours,this.minutes,this.seconds,this.milliSeconds),this.getDate()}catch(a){manageAlert(a)}},this.subYear=function(a,b,c){try{if(isNaN(a))throw"Invalid Number of Years.";if(a=parseInt(a),""!=b&&void 0!=b&&null!=b){var d=dateTokens(b,c);return d.inDateObj[d.inFormatObj.year]=parseInt(d.inDateObj[d.inFormatObj.year])-a,b=replaceTokens(d.formatedDate,d.inDateObj)}return this.year-=a,refDate=this.date=new Date(this.year,this.month,this.day,this.hours,this.minutes,this.seconds,this.milliSeconds),this.getDate()}catch(a){manageAlert(a)}},this.compareDate=function(a,b,c,d){var e;try{for(var f=Object.keys(this.getFormats()),g=dateTokens(a,b),h=dateTokens(c,d),i=0;i<f.length;i++){var j=f[i]in g.inFormatObj;if(j=f[i]in h.inFormatObj,!j)throw"Compare Error. Format Mismatch...";var k;if("year"==f[i]?k=compareYear(g.inDateObj[g.inFormatObj.year],g.inFormatObj.year,h.inDateObj[h.inFormatObj.year],h.inFormatObj.year):"month"==f[i]?k=compareMonth(g.inDateObj[g.inFormatObj.month],g.inFormatObj.month,h.inDateObj[h.inFormatObj.month],h.inFormatObj.month):"day"==f[i]?k=compareDays(g.inDateObj[g.inFormatObj.day],g.inFormatObj.day,h.inDateObj[h.inFormatObj.day],h.inFormatObj.day):"hours"==f[i]?k=compareHours(g.inDateObj[g.inFormatObj.hours],g.inFormatObj.hours,g.inFormatObj.meridiem,h.inDateObj[h.inFormatObj.hours],h.inFormatObj.hours,h.inFormatObj.meridiem):"minutes"==f[i]?k=compareMinutes(g.inDateObj[g.inFormatObj.minutes],h.inDateObj[h.inFormatObj.minutes]):"seconds"==f[i]?k=compareSeconds(g.inDateObj[g.inFormatObj.seconds],h.inDateObj[h.inFormatObj.seconds]):"milliSeconds"==f[i]&&(k=compareMilli(g.inDateObj[g.inFormatObj.milliSeconds],h.inDateObj[h.inFormatObj.milliSeconds])),void 0==k)throw"Unable to compare dates.";if("equal"!=k){e=k;break}}if(void 0==e)throw"Unable to compare dates."}catch(a){manageAlert(a)}return e}};